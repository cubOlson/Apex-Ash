<head>
    <title>Basic Effects</title>
    <meta description="Basic Effects" />
    <meta publisher="SignalRgb" />

    <meta property="Red" label="red" type="number" min="0" max="10" default="5"/>
    <meta property="Blue" label="blue" type="number" min="0" max="10" default="5"/>
    <meta property="Red2" label="red2" type="number" min="0" max="10" default="5"/>
    <meta property="Blue2" label="blue2" type="number" min="0" max="10" default="5"/>
    <meta
    property="vert"
    label="Vertical"
    type="boolean"
    default="1"
    />

</head>
<body style="margin: 0; padding: 0; background: #000;">
  <canvas id="exCanvas" width="320" height="200"></canvas>
</body>
<script>
  canvas = document.getElementById('exCanvas');
  ctx = canvas.getContext('2d');
  var effects = [];

  function update(){
    drawRect(0,0, 320, 200, "grey");

    if(effects.length < 1){
      effects.push(new competitiveScore(0, 0, 320, 200, red, blue))
    }

    effects.forEach((ele, i) => {
        ele.draw();
        if(ele.lifetime <= 0){
          effects.splice(i, 1);
        }
      });

    window.requestAnimationFrame(update);
  }

  function competitiveScore(x, y, width, height, var1, var2){
    this.lifetime = 10;
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.var1 = var1;
    this.var2 = var2;
    
    this.draw = function(){
      var redValue = this.var1 / (this.var1 + this.var2);
      var blueValue = this.var2 / (this.var1 + this.var2);
      if(vert){
        drawRect(this.x, this.y, this.width, blueValue * this.height, Blue >= 9 ? `hsl(240, 100%, ${Math.cos(Date.now() / 200) * 5 + 55}%)` : "blue")
        drawRect(this.x, this.y + blueValue * this.height, this.width, redValue * this.height, Red >= 9 ? `hsl(0, 100%, ${Math.sin(Date.now() / 200) * 5 + 55}%)` : "red")
      } else {
        drawRect(this.x, this.y, blueValue * this.width, this.height, Blue >= 9 ? `hsl(240, 100%, ${Math.cos(Date.now() / 200) * 5 + 55}%)` : "blue")
        drawRect(this.x + blueValue * this.width, this.y, redValue * this.width, this.height, Red >= 9 ? `hsl(0, 100%, ${Math.sin(Date.now() / 200) * 5 + 55}%)` : "red")
      }
    }
  }

  function renderPath(x, y, path, color){
    ctx.fillStyle = color;
    ctx.save();
    ctx.translate(x, y);
    let ex = new Path2D(path);
    ctx.fill(ex);
    ctx.restore();
  }

    function DrawCircle(x, y, radius, color){
        ctx.beginPath();
        ctx.fillStyle = color;
        ctx.arc(x,y,radius, 0, 2* Math.PI)
        ctx.fill();
    };

    function DrawStroke(x, y, radius, color, stroke){
        ctx.beginPath();
        ctx.strokeStyle = color;
        ctx.lineWidth = stroke;
        ctx.arc(x,y,radius, 0, 2* Math.PI)
        ctx.stroke();
    };

    function drawRect(x, y, height, width, color){
      ctx.beginPath();
      ctx.fillStyle = color;
      ctx.fillRect(x, y, height, width);
    }

  window.requestAnimationFrame(update);
</script>
  