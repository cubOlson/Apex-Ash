<head>
    <title>Basic Effects</title>
    <meta description="Basic Effects" />
    <meta publisher="SignalRgb" />
    <meta property="effectY" label="Y" type="number" min="0" max="200" default="100"/>
    <meta property="effectRadius" label="Radius" type="number" min="0" max="50" default="10"/>
    <meta property="effectNumber" label="Number" type="number" min="1" max="3" default="1"/>

</head>
<body style="margin: 0; padding: 0; background: #000;">
  <canvas id="exCanvas" width="320" height="200"></canvas>
</body>
<script>
  canvas = document.getElementById('exCanvas');
  ctx = canvas.getContext('2d');
  var effects = [];

  var back = "M316.22,190.42,243.72,159l-15.5-10.89-5.78-38.45,6-5.77,5.17-33.78L231.55,69s20.67-70.22-69-68.45S96,69.64,96,69.64l-1.33,2,7.11,30.67c-9.56,9.33-2.89,48.89-2.89,48.89L2.55,190.42ZM221.63,39.72,227,56.9,223,55l-1.33-4.59L219.11,47ZM125.44,125l-.77,10.22s-4.09,3.26-4.12,2.56C120.44,134.76,125.44,125,125.44,125ZM99.26,56.9c-.45-7.7,7.55-22.51,7.55-22.51v8c-5.77,5.92-.59,12.29-.59,12.29Z";
  var vest = "M4.77,44.86.55,14.63,37.44,2.19S97.89,94.41,171.22.63L204.77,18V46.41Z";

  function update(){
    copyScreen(1)

    renderPath(0, 0, back, "black");

    ctx.fillStyle = "red"
    ctx.transform(1, 0, 0, 1,0, 20);
    let p2 = new Path2D(vest);
    ctx.fill(p2);

    // if(effects.length < 1){
    //   effects.push();
    // }

    // effects.forEach((ele, i) => {
    //   ele.draw();
    //   if(ele.lifetime <= 0){
    //     effects.splice(i, 1);
    //   }
    // });

    window.requestAnimationFrame(update);
  }

  function renderPath(x, y, path, color){
    ctx.fillStyle = color;
    ctx.save();
    ctx.translate(x, y);
    let ex = new Path2D(path);
    ctx.fill(ex);
    ctx.restore();
  }


  function movingParticle(x, y, color){
    this.x = x;
    this.y = y;
    this.color = color;
    this.radius = Math.random() * 30;
    this.vy = 8 * Math.random() + 1;
    this.vx = 3 * Math.random() + 1;
    this.lifetime = 10;

    this.draw = function(){
      DrawCircle(this.x, this.y, this.radius, this.color);
      this.x += this.vx;
      this.y -= this.vy;
      if(this.y < 0){
        this.lifetime = 0;
      }
    }
  };

  function copyScreen(alpha) {
    let lightness = new Int8Array(engine.zone.lightness);
    let sat = new Int8Array(engine.zone.saturation);
    let hue = new Int16Array(engine.zone.hue);

    for (var iZone = 0; iZone < 560; iZone++) {
        ctx.fillStyle =
          "hsla(" +
          hue[iZone] +
          "," +
          sat[iZone] +
          "%," +
          lightness[iZone] +
          "%, " +
          alpha
          +
          ")";
      
      var iRow = Math.floor(iZone / 28);
      var iCol = iZone % 28;
      var iWidth = 320 / 28;
      var iHeight = 200 / 20;
      var iZx = iCol * iWidth;
      var iZy = iRow * iHeight;

      ctx.fillRect(iZx, iZy, iWidth, iHeight);
    }
  }

    function DrawCircle(x,y,radius,color){
        ctx.beginPath();
        ctx.fillStyle = color;
        ctx.arc(x,y,radius, 0, 2* Math.PI)
        ctx.fill();
    };

  window.requestAnimationFrame(update);
</script>
  