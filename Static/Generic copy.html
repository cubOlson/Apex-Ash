<head>
    <title>Basic Effects</title>
    <meta description="Basic Effects" />
    <meta publisher="SignalRgb" />

    <meta property="Red" label="red" type="number" min="0" max="10" default="5"/>
    <meta property="Blue" label="blue" type="number" min="0" max="10" default="5"/>
    <meta property="Red2" label="red2" type="number" min="0" max="10" default="5"/>
    <meta property="Blue2" label="blue2" type="number" min="0" max="10" default="5"/>
    <meta
    property="vert"
    label="Vertical"
    type="boolean"
    default="1"
    />

</head>
<body style="margin: 0; padding: 0; background: #000;">
  <canvas id="exCanvas" width="320" height="200"></canvas>
</body>
<script>
  canvas = document.getElementById('exCanvas');
  ctx = canvas.getContext('2d');
  var effects = [];

  var skull = "M8.05,64.93S-10.76,9.44,56.44,2.51c0,0,65.88,4.29,48.05,62.42,0,0,4,9.58-.66,18.5,0,0,6.27,9.9,1.65,12.22l4.62,8.91s-8.25,20.81-16.51,11.56c0,0-6.28-21.68-12.55,2.37,0,0,4.62,18.11-6.61,29l-4.29-2.31-3,5.94-3.31-4.29-3.3,4.29-4.12-2-4.14,2L49,147.5l-3,3.63-3.63-5.28-4.3,2.64s-3.63-9.91-6.27-11.23-5.62-14.86-.66-18.49-7.27-18.5-14.53.66c0,0-7.93,1-13.88-15.53l5-7.92s-3.64-4.63,1-10.24C8.71,85.74.45,73.85,8.05,64.93Z"

  function update(){
    drawRect(0,0, 320, 200, "grey");

    if(effects.length < 1){
      effects.push(new crucibleDefeat())
    }

    effects.forEach((ele, i) => {
        ele.draw();
        if(ele.lifetime <= 0){
          effects.splice(i, 1);
        }
      });

    window.requestAnimationFrame(update);
  }

  function crucibleDefeat(){
      this.lifetime = 10;
      this.lightness1 = 100;
      this.lightness2 = 100;
      this.lightness3 = 100;
      this.alpha = 1;
      
      this.draw = function(){
        var grd = ctx.createLinearGradient(160, 0, 160, 200);
        grd.addColorStop(0, `hsl(0, 100%, ${this.lightness1}%)`);
        grd.addColorStop(.5, `hsl(0, 100%, ${this.lightness2}%)`);
        grd.addColorStop(1, `hsl(0, 100%, ${this.lightness3}%)`);
        this.lightness1 > 50 ? this.lightness1-- : this.lightness2 > 50 ? this.lightness2-- : this.lightness3 > 50 ? this.lightness3-- : null;
        this.lightness3 <= 50 ? this.alpha -= .01 : null;
        ctx.globalAlpha = this.alpha
        ctx.fillStyle = grd;
        ctx.fillRect(0, 0, 320, 200);
        renderPath(105, 15, skull, "white");
        DrawCircle(140, 90, 15, `hsl(0, 100%, ${this.lightness2}%)`)
        DrawCircle(180, 90, 15, `hsl(0, 100%, ${this.lightness2}%)`)
        ctx.globalAlpha = 1;
        this.alpha <= 0 ? this.lifetime = 0 : null;
      }
    }

  function renderPath(x, y, path, color){
    ctx.fillStyle = color;
    ctx.save();
    ctx.translate(x, y);
    let ex = new Path2D(path);
    ctx.fill(ex);
    ctx.restore();
  }

    function DrawCircle(x, y, radius, color){
        ctx.beginPath();
        ctx.fillStyle = color;
        ctx.arc(x,y,radius, 0, 2* Math.PI)
        ctx.fill();
    };

    function DrawStroke(x, y, radius, color, stroke){
        ctx.beginPath();
        ctx.strokeStyle = color;
        ctx.lineWidth = stroke;
        ctx.arc(x,y,radius, 0, 2* Math.PI)
        ctx.stroke();
    };

    function drawRect(x, y, height, width, color){
      ctx.beginPath();
      ctx.fillStyle = color;
      ctx.fillRect(x, y, height, width);
    }

  window.requestAnimationFrame(update);
</script>
  