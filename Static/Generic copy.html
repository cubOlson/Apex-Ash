<head>
    <title>Testing File</title>
    <meta description="Basic Effects" />
    <meta publisher="SignalRgb" />

    <meta property="Red" label="red" type="number" min="0" max="10" default="5"/>
    <meta property="Blue" label="blue" type="number" min="0" max="10" default="5"/>
    <meta property="Red2" label="red2" type="number" min="0" max="10" default="5"/>
    <meta property="Blue2" label="blue2" type="number" min="0" max="10" default="5"/>
    <meta
    property="boosted"
    label="Vertical"
    type="boolean"
    default="1"
    />

</head>
<body style="margin: 0; padding: 0; background: #000;">
  <canvas id="exCanvas" width="320" height="200"></canvas>
</body>
<script>
  canvas = document.getElementById('exCanvas');
  ctx = canvas.getContext('2d');
  var effects = [];

  var chicken = "M38.42,7.43S32.2,4.55,15.53,35c0,0-6-16.22-8,1.56,0,0-5.55,14-6.89,20S7.75,70.77,7.75,70.77s-22.44,31.55,15.34,27.55c0,0,29.77,29.78,61.77,13.78,0,0,39.12,14,76.45-20.22,0,0,14.67-7.78-7.78-23.56,0,0-9.78-16.89,24.45-34.89,0,0,9.11-8.88-2.67-11.33,0,0-3.33-20.67-14.45-2.22S132,39,132,39l-4-6.22s2.88-10.89,8.88-13.56,12-14.22-2.22-14c0,0-11.11-12.44-13.33,3.11L116.2,23.21S79.09,1.66,37.75,27.88l-.22-3.78,1.78-6.22Z";
  var plate = "M28.44,74.29s62.89,46.22,132.89,0c0,0,84.45-47.34-35.55-73.78L18.22,15.62S-27.78,44.73,28.44,74.29Z";

  function update(){
    drawRect(0, 0, 320, 200, "grey");

    if(effects.length < 1){
      effects.push(new winEffect())
    }

    effects.forEach((ele, i) => {
        ele.draw();
        if(ele.lifetime <= 0){
          effects.splice(i, 1);
        }
      });

    window.requestAnimationFrame(update);
  }

  function winEffect(){
    this.x = 150;
    this.y = -120;
    this.lifetime = 10;
    this.effects = [];
    this.start = Date.now();
    this.draw = function(){
      this.effects.forEach((ele, i) => {
        ele.draw();
        if(ele.lifetime <= 0){
          this.effects.splice(i, 1);
        }
      });
      renderPath(this.x - 80, this.y + 30, plate, "white")
      renderPath(this.x - 65, this.y - 15, chicken, "yellow")
      if(this.y < 40){
        this.y+=2
      } else {
        for(let i = 0; i < 3; i++){
          this.effects.push(new explosionParticle(160, 100, 20, "orange"));
        }
      }
      var elapsed = Date.now() - this.start;
      if(elapsed > 10000){
        this.lifetime = 0;
      }
    }
  }

  function explosionParticle(x, y, min, color) {
    this.x = x;
    this.y = y;
    this.vx = Math.random() * -min + min / 2;
    this.vy = Math.random() * -min + min / 2;
    this.min = min;
    this.color = color;
    this.lifetime = 10;
    this.draw = function () {
      DrawCircle(this.x, this.y, Math.random() * 10 + 10, this.color)
      this.x += this.vx;
      this.y += this.vy;
      if (this.x > 320 || this.x < 0 || this.y > 200 || this.y < 0) {
        this.lifetime = 0;
      }
    }
  }

  function renderPath(x, y, path, color){
    ctx.fillStyle = color;
    ctx.save();
    ctx.translate(x, y);
    let ex = new Path2D(path);
    ctx.fill(ex);
    ctx.restore();
  }

    function DrawCircle(x, y, radius, color){
        ctx.beginPath();
        ctx.fillStyle = color;
        ctx.arc(x,y,radius, 0, 2* Math.PI)
        ctx.fill();
    };

    function DrawStroke(x, y, radius, color, stroke){
        ctx.beginPath();
        ctx.strokeStyle = color;
        ctx.lineWidth = stroke;
        ctx.arc(x,y,radius, 0, 2* Math.PI)
        ctx.stroke();
    };

    function drawRect(x, y, height, width, color){
      ctx.beginPath();
      ctx.fillStyle = color;
      ctx.fillRect(x, y, height, width);
    }

  window.requestAnimationFrame(update);
</script>
  