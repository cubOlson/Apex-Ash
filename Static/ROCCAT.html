<head>
    <title>DrDisRespect</title>
    <meta description="DrDisRespect Theme from ROCCAT" />
    <meta publisher="ROCCAT" />
    <meta
    property="realish"
    label="6-foot-8 frame"
    type="boolean"
    default="1"
    />
    <meta property="drX" label="X-Coordinate" type="number" min="-200" max="200" default="-16"/>
    <meta property="drY" label="Y-Coordinate" type="number" min="-200" max="200" default="-1"/>
    <meta property="drScale" label="Scale" type="number" min="0" max="50" default="11"/>
    <meta property="sweepSpeed" label="Speed" type="number" min="0" max="100" default="50"/>
    <meta property="sweepFreq" label="Frequency" type="number" min="0" max="100" default="50"/>

</head>
<body style="margin: 0; padding: 0; background: #000;">
  <canvas id="exCanvas" width="320" height="200"></canvas>
</body>
<script>
  canvas = document.getElementById('exCanvas');
  ctx = canvas.getContext('2d');
  var effects = [];
  var sweepStart = Date.now();


  var back = "M316.22,190.42,243.72,159l-15.5-10.89-5.78-38.45,6-5.77,5.17-33.78L231.55,69s20.67-70.22-69-68.45S96,69.64,96,69.64l-1.33,2,7.11,30.67c-9.56,9.33-2.89,48.89-2.89,48.89L2.55,190.42ZM221.63,39.72,227,56.9,223,55l-1.33-4.59L219.11,47ZM125.44,125l-.77,10.22s-4.09,3.26-4.12,2.56C120.44,134.76,125.44,125,125.44,125ZM99.26,56.9c-.45-7.7,7.55-22.51,7.55-22.51v8c-5.77,5.92-.59,12.29-.59,12.29Z";
  var vest = "M4.77,44.86.55,14.63,37.44,2.19S97.89,94.41,171.22.63L204.77,18V46.41Z";
  var face = "M1.54,15.66.5,29.73l3,19.56L6.87,70S21.91,97,41,96.25,79.76,68.4,79.76,68.4l2.82-29V24.1S50.28,10,47.47.84C47.47.84,32.21,12.84,1.54,15.66Z";
  var sunglasses = "M.6.82S23.16-.74,34.71,3s27.11-.56,27.11-.56S74.27-1.09,85.27,4.59H88.6V6.93H86.05l-1.67,5H82.94l-3.89,12S63.94,32.15,56.49,29.6c0,0-6-13-11-14.31s-12.22,13-12.22,13S29.49,31.48,18.94,26l-10-4.33L6.16,15.29,3.27,5.15,1.38,4.71Z";
  var mustache = "M17.62,1S.17,4.34.5,18.34l2.78,2s5.11-9,18.22-8.56,16.78,7.45,16.78,7.45l4.45-1.89S46.06,6.12,26.06.56A6.23,6.23,0,0,1,17.62,1Z";

  var logoShades = "M4.29.52,47.85,14.15s8.3,2.37,15.11,0S105.63.52,105.63.52,112.74-.67,108,23.33c0,0-5.63,16.93-40.89,14.69,0,0-11.32-32.27-23.7,0,0,0-19,6.65-41.49-13.8C1.92,24.22-2.52,2.3,4.29.52Z";
  var logoStache = "M41.75,6.5S41.45,0,58.64.57L82.93,21.91,76.71,47.09S80.56,25.76,61,21L41.93,18.65,21.6,21.31S4.12,25.16,7.38,47.09L.56,22.5,23.67.53S37.6-.32,41.75,6.5Z";

  function update(){
    var movement = Math.sin(Date.now() / 300) * 2;

    if (realish){
      ctx.fillStyle = `rgb(50, 0, 0)`;
      ctx.fillRect(0, 0, 320, 200);

      if (sweepSpeed > 0){
        for (let i = 0; i < sweepFreq / 25; i++){
          effects.push(new movingParticle("white", false));
        };
      }
    
      effects.forEach((ele, i) => {
        ele.draw();
        if(ele.lifetime <= 0){
          effects.splice(i, 1);
        }
      });

      ctx.save()
      ctx.transform(drScale/10, 0, 0, drScale/10, 160 - drScale * 16.5, 79 - drScale * 7.5);
      renderPath(drX, drY + 10 + movement, back, `hsl(0, 0%, 5%)`);
      renderPath(drX + 60, drY + 155 - movement, vest, `hsl(0, 100%, 50%)`);
      renderPath(drX + 123, drY + 60 + movement * .9, face, `hsl(0, 0%, 60%)`);
      renderPath(drX + 120, drY + 75 + movement * .8, sunglasses, "red");
      renderPath(drX + 143, drY + 117 + movement * .8, mustache, `hsl(0, 0%, 5%)`);
      ctx.restore();
    } else {
      if(Date.now() - sweepStart > 2200 - sweepFreq * 20){
        effects.push(new upwardSweep());
        sweepStart = Date.now();
      }

      effects.forEach((ele, i) => {
        ele.draw();
        if(ele.lifetime <= 0){
          effects.splice(i, 1);
        }
      });
      ctx.save()
      ctx.transform(drScale/10, 0, 0, drScale/10, 155 - drScale * 15, 85 - drScale * 8);
      renderPath(drX + 100, drY + 55, logoShades, "black");
      renderPath(drX + 113, drY + 100, logoStache, "black");
      ctx.lineWidth = 10;
      DrawStroke(drX + 155, drY + 95, 75, `hsl(0, 0%, 5%)`);
      ctx.restore();

      ctx.globalAlpha = .1;
      ctx.fillStyle = "rgb(10, 10, 10)";
      ctx.fillRect(0, 0, 320, 200);
      ctx.globalAlpha = 1;
    }

    window.requestAnimationFrame(update);
  }

  function renderPath(x, y, path, color){
    ctx.fillStyle = color;
    ctx.save();
    ctx.translate(x, y);
    let ex = new Path2D(path);
    ctx.fill(ex);
    ctx.restore();
  }


  function movingParticle(color, direction){
    this.x = Math.random() * 320;
    this.y = 200;
    this.color = color;
    this.radius = Math.random() * 30;
    this.random = Math.sin(Date.now()) * 4;
    this.lifetime = 10;

    this.draw = function(){
      ctx.globalAlpha = .1;
      DrawCircle(this.x, this.y, this.radius, this.color);
      if (this.x < 160){
        this.x -= sweepSpeed/12 + this.random; 
      } else {
        this.x += sweepSpeed/12 + this.random;
      }
      this.y -= sweepSpeed/10;
      if(this.y < 0){
        this.lifetime = 0;
      }
      ctx.globalAlpha = 1;
    }
  };



    function upwardSweep(){
      this.lifetime = 200;
      this.y = 200;
      this.draw = function(){
        ctx.beginPath();
        ctx.fillStyle = "red";
        ctx.fillRect(0, this.y, 320, 30);
        this.y-=sweepSpeed/4;
        if (this.y < -10){
          this.lifetime = 0;
        } 
      }
    };

    function audioFlash(){
      this.lifetime = 10;
      this.draw = function(){
        ctx.globalAlpha = this.lifetime / 10;
        ctx.fillStyle = "white";
        ctx.fillRect(0, 0, 320, 200);
        ctx.globalAlpha = 1;
        this.lifetime--;
      }
    }

    function DrawCircle(x,y,radius,color){
        ctx.beginPath();
        ctx.fillStyle = color;
        ctx.arc(x,y,radius, 0, 2* Math.PI)
        ctx.fill();
    };

    function DrawStroke(x,y,radius,color){
        ctx.beginPath();
        ctx.strokeStyle = color;
        ctx.arc(x,y,radius, 0, 2* Math.PI)
        ctx.stroke();
    };

  window.requestAnimationFrame(update);
</script>
  