<head>
  <title>Day and Night Cycle</title>
  <meta
    description="An effect that changes based on your time of day with subtle movement that is toggleable on and off."
  />
  <meta publisher="SignalRGB" />
  <meta
    property="enableTOverride"
    label="Override Time"
    type="boolean"
    min="0"
    max="1"
    default="0"
  />
  <meta
    property="timeOverride"
    label="Manual Hour"
    type="number"
    min="0"
    max="23"
    default="0"
  />
  <meta
    property="motionEffects"
    label="Motion effects"
    type="boolean"
    min="0"
    max="1"
    default="1"
  />
</head>

<body style="margin: 0; padding: 0">
  <canvas id="exCanvas" width="320" height="200"></canvas>
</body>

<script>
  var c = document.getElementById("exCanvas");
  var ctx = c.getContext("2d");
  var width = 320;
  var height = 200;

  const elkStanding =
    "M91.6,76.7 92.3,71.2 90.8,68.5 93.2,65.3 98.6,65.3 98.6,62 95.9,58.1 95.5,52.6 96.5,54.2 97.8,52.6   96.6,57.2 99.9,60.5 103.8,57.4 103.8,54.5 103.8,52.6 105,53.9 106,52.6 105.1,57.2 102.3,60.8 101.9,63.5 102.9,65.7 103.2,69.6   101.4,71.7 101.9,76.7 99.9,72.4 99.9,76.7 99,72.9 94.9,72.4 95.2,76.7 94,72.6 92.3,76.7";

  const elkDrinking =
    "M91.7,76.7l0.7-5.5l-1.5-2.7l2.4-3.3h5.4l3.3,1.2l3.6,3.5l1.7-4.7l0.2,0.3l-0.2,1.1l1.2-0.2l0.9-0.1l-2.2,1.2  l-0.3,1l3.6-0.1l-3.4,0.5l0,0.8l2.7-0.4l-2.4,0.8l-0.3,0.2l1,0.3l-1.4,0.6l0.7,3c0.1,0.7,0.1,1.3-0.5,1.6c-0.2,0.1-0.4,0-0.6-0.1  l-1.6-2.2l-0.9-1.4l-2.3-0.6l0.4,5.1l-1.9-4.3v4.3l-0.9-3.9l-4.2-0.4l0.3,4.3L94,72.5l-1.6,4.2";

  const elkSleeping =
    "M93.8,77.5 91.8,75.4 93.8,72.8 99.1,72.5 99,72.1 94.9,70 91.9,65.2 93.6,66.2 94,64.1 95.1,68.9   99.5,70.2 101.5,65.7 100.2,63.2 99.3,61.4 101,62.1 101.3,60.4 102.6,65 101.7,69.4 102.6,72 103.7,72.6 105.8,75.2 104.9,78.1 ";

  const pond =
    "M86.4,66.5 93,62.8 99.9,62.8 103.5,59.5 108.1,59.5 109.6,61.6 112.6,59.5 115.8,57.9 119.7,62.2   121.3,59.5 125.7,56.5 137,57.3 138,58.9 144.9,59.5 146.8,61.5 144.9,63.9 147.9,66.5 148.7,70.7 136.7,77.3 120.5,77.3   102.7,75.2 ";

  const mtnLayer1_1 =
    "M0.2,59.6 5.2,57.5 -0.6,56.1 5.2,52.7 -1.5,48.6 8.6,47.6 -1.5,42.9 10.6,39.7 0.3,37.6 10.6,34.5   2,31.5 9.2,31.1 2.5,28.1 9.9,28.1 2.9,22.5 11.9,21.8 5.2,19 13.8,17.3 14.5,15.9 4.9,14.2 14.5,14.2 9.5,12 8.9,8 12.3,8.7   13,5.9 11.1,3.7 13.7,3.7 14.5,0 15.6,0 15.6,1.8 17.1,0.9 17.1,3 19.8,3.5 18.5,7.3 21.4,6.4 22.8,7.8 21.8,10.3 19.3,11.6   24,14.8 20.2,16.2 19.5,17.4 26.6,17.7 28.2,18.4 26.3,20.3 21,21.8 21.1,22.8 25.4,22.4 27.2,22.8 22.8,25.3 21.2,27.7 26.8,28   30.3,26.3 29.8,23 32.2,14.2 35.2,25.5 37.3,25.9 34.8,28.6 35.3,30.2 38,30.2 37.6,32.6 35.4,34.2 38.8,34.9 35.3,36.2 36.4,36.7   35.2,38.5 38.1,38.7 35.2,41.4 38.1,42.5 36.9,43.4 36.9,44.7 42.2,46.1 42.2,44 38.8,42.7 38,41 40.3,38.9 45.6,39.1 40.6,37.1   41.6,35.4 46.8,36.9 43.7,34.8 43.1,32.3 45.3,33.2 44.7,29.2 47.7,26.7 50.1,29 47.9,30.9 47.9,33.4 50.7,31.9 52.6,31.5   51.9,33.9 50.9,36.4 54.6,37 49.6,39 57.3,39.2 51,41.4 57.3,42.5 51,44 52,46.1 58.4,46 55.9,48.4 51.9,49.4 58.4,49.9 59.2,51.2   54.8,52.5 59.2,53.4 56,55.3 61.7,55.3 57.2,57 63.3,58 58.7,60.4 63.3,61.6 64,64.1 56.8,64.1 57.8,65.2 65.9,65.2 57.9,68   65.2,72.7 75.1,72.7 96.4,78.6 102.6,78.6 127.4,84.5 141.1,80.5 159.8,77.7 159.8,105.2 -1.5,105.2";

  const mtnLayer1_2 =
    "M241.49 105.17 241.49 4.29 239.72 6.22 240.63 11.44 235.61 12.19 240.63 15.91 234.54 16.06 239.11 18.6 231.65 20.39 239.87 25.01 233.02 25.6 236.82 28.73 232.11 29.48 239.11 32.01 231.04 34.84 238.35 38.57 229.22 41.7 224.04 40.96 230.13 36.04 221.16 36.63 221.46 35.14 227.7 31.12 217.81 29.03 226.94 25.9 216.9 24.56 225.41 21.58 216.29 19.49 223.28 18.89 219.33 17.11 220.39 14.57 220.39 10.85 217.66 10.7 217.66 7.71 213.85 8.46 215.83 6.67 213.85 4.29 212.03 6.22 209.59 7.86 210.96 12.78 206.7 11.44 206.85 13.68 212.94 17.85 205.64 16.36 203.35 18.45 212.94 21.13 203.81 22.62 212.94 26.05 206.85 24.26 200.62 26.05 210.5 30.17 201.53 32.16 210.5 33.8 200.62 34.84 209.14 37.38 200.16 40.06 207.46 44.24 198.33 44.09 198.49 46.02 207.46 49.9 198.18 49.75 207.46 53.33 197.88 52.59 193.62 52.59 197.12 48.11 190.42 48.26 196.05 43.94 190.27 41.26 193.31 38.57 189.81 37.83 192.1 34.25 189.97 34.25 191.03 31.12 191.03 28.14 187.68 30.17 188.6 26.5 188.6 23.52 187.23 22.17 188.6 20.83 187.08 20.53 186.01 17.55 184.34 26.5 182.36 26.5 184.79 30.17 182.06 30.17 182.21 31.71 186.01 33.95 182.21 33.95 184.95 36.04 180.53 36.04 182.82 36.78 180.84 39.17 183.73 41.85 176.27 43.64 182.82 47.37 177.49 48.11 178.71 50.5 183.73 53.63 177.34 53.63 175.51 56.01 182.51 60.48 175.06 62.27 179.77 66.6 173.23 67.64 172.62 69.58 181.45 69.58 158.4 77.7 158.4 105.17";

  const mtnLayer2_1 =
    "M0,47.81,63.11,63.32,64.75,66h4.62l6.7,3.28,10,1.79h4.33l14.9,2.53L112,75.69h11.18l17.14-1.64,7.22-2.73.83-2.79,6,.6L156.12,66l1.94.89,2.24-2.68,5.22.3,1.19-1.64,4.17.6V61.75l7.9-3.35,8.8-.3,3.13-3.28,13.41-5.07,5.22,1.19,18-9.09,6.86,1L240,39v65.29L0,105.17";

  const mtnLayer3_1 =
    "M0,38,29.27,41.4l25.79,9,7.75,1.49,2.38-2.39,4.33.3,2.83-2.68,5.51-.3,19.46,15-4.55,1-6.56,3.87,6.56,3L88.15,101,3.48,100";

  const mtnLayer3_2 =
    "M100.7,58.5 106.6,56.5 117.5,55.4 123.3,56.5 137.2,56.5 141.2,53 146.7,47.4 151.5,45.7 162.8,47.5   166.1,44.7 170.7,44.7 175.8,40.8 178,39.6 189.4,40.5 194.6,36 198.3,34.2 200.8,36.3 215.5,33.2 224.1,28.9 229.8,28.9 240,24.7   240,104.3 88.1,101 ";

  const mtnLayer4_1 =
    "M0,31.86l34.48,8.8H47.3L58.48,43,60,45.43H64.6l5.06-1.49,20,7h14l17.89,3.79,21.81-3.89,21.72-7.54,9.24-7.11,2.24-5.07,4.62-3.58H191.6l4.18-5.22L198,21.13l3.88,2.09v4.47l18.33-11L222.46,18l2.38-1.34,2.24.59,1.64-2.53,10.58-.6-.74,90h0l.74-74Q238,52.86,236.7,75.54l-69.62-2.16-26.76.67-14.47,1.38L112,75.69l-8.83-2.45L72.5,74.87,0,75.91";

  const mtnLayer5_1 =
    "M65.6,54.1 83.4,46 86.4,46.9 89.9,41.4 95.8,45.1 98.4,44.1 104.8,49.9 120.9,54.1 129.4,50.5   134.8,48.7 143.5,45.6 150.6,47.7 156.9,39 158.6,41.1 159.9,38 163,36.8 164.1,39 166.9,34.1 175.2,34.1 175.2,79.6 67.3,79.6 ";

  const mtnLayer6_1 =
    "M32.4,35.1 61.3,36 74,42.9 84.4,45.1 90.1,40.1 102.8,48 107.2,42.3 112.9,43.3 117.5,38 123.9,43.8   130.2,44.2 132.7,46.9 145.2,40.7 148.7,41.6 150.2,39 154.3,40.7 160.7,35.1 167.5,38 168.6,77.3 34.2,86.7 ";

  const img1 = "img1";
  const img2 = "img2";
  const img3 = "img3";
  const img4 = "img4";
  const img5 = "img5";
  const img6 = "img6";
  const img7 = "img7";
  const img8 = "img8";
  const img9 = "img9";
  const img10 = "img10";
  const img11 = "img11";
  const img12 = "img12";

  const bird1 = "M16.22,32.06c.47-2,14.91-.8,15.2-4.85C31.8,21.93-8.44-1.7.71,1.11c69,21.23,34.59,16,46.44,24.76L57.29,23l33.31.07L85,26.69,61,28l3.21,3.88,2.83.15A39.18,39.18,0,0,1,49,41C31.77,44.32,15.66,34.43,16.22,32.06Z";

  const bird2 = "M19.7,32c-1.4,0,3.4-13.2,6.8-16.8c2.8-2.9-8.2-2.6-8.3-3.7C18,10.5,24,8.5,46,4.5h12.4l1.2,1l-2.5,1.1  c0.1,0.7,9.6,8.7,10,9.7c4.6,10.9,3,19.1,1.8,22.7c0,0.1-13.7-25.6-23.3-26.8C35.8,11.2,28.3,31.8,19.7,32z";

  var stars = [];
  var bp = 0;

  const mtn_5_1 = new Path2D(mtnLayer5_1);
  const mtn_4_1 = new Path2D(mtnLayer4_1);
  const mtn_3_1 = new Path2D(mtnLayer3_1);
  const mtn_3_2 = new Path2D(mtnLayer3_2);
  const mtn_2_1 = new Path2D(mtnLayer2_1);
  const mtn_1_1 = new Path2D(mtnLayer1_1);
  const mtn_1_2 = new Path2D(mtnLayer1_2);
  const pond_1 = new Path2D(pond);
  const elk_1 = new Path2D(elkStanding);
  const elk_2 = new Path2D(elkDrinking);
  const elk_3 = new Path2D(elkSleeping);
  const bird_1 = new Path2D(bird1);
  const bird_2 = new Path2D(bird2);


  function update() {
    var now = 0;
    var currentImage = img1;
    if (enableTOverride) {
      now = timeOverride;
    } else {
      const d = new Date();
      now = d.getHours();
    }

    starMeter.setValue(now);

    switch (now) {
      case 0:
      case 1:
        currentImage = img11;

        var grd = ctx.createRadialGradient(160, 150, 5, 160, 150, 200);
        grd.addColorStop(0.1, "#6d5b51");
        grd.addColorStop(0.5, "#1c2249");
        grd.addColorStop(1, "#061030");
        ctx.fillStyle = grd;
        ctx.fillRect(0, 0, 320, 200);

        ctx.transform(1.4, 0, 0, 1.4, 0, 0);
        ctx.translate(0, 42);

        ctx.fillStyle = "#292e4f";
        ctx.fill(mtn_5_1);

        ctx.fillStyle = "#1f233e";
        ctx.fill(mtn_4_1);

        ctx.fillStyle = "#1d2038";
        ctx.fill(mtn_3_1);
        ctx.fill(mtn_3_2);

        var pondGrd = ctx.createLinearGradient(0, 0, 0, 140);
        pondGrd.addColorStop(0.4, "#6d5b51");
        pondGrd.addColorStop(0.5, "#1c2249");
        pondGrd.addColorStop(0.55, "#061030");

        ctx.fillStyle = pondGrd;
        ctx.fill(pond_1);

        ctx.fillStyle = "#161a2d";
        ctx.fill(mtn_2_1);

        ctx.fillStyle = "#121727";
        ctx.fill(mtn_1_1);
        ctx.fill(mtn_1_2);
        ctx.fill(elk_3);

        ctx.setTransform(1, 0, 0, 1, 0, 0);
        break;
      case 2:
      case 3:
        currentImage = img12;
        var grd = ctx.createRadialGradient(160, 150, 5, 160, 150, 200);
        grd.addColorStop(0.1, "#6a4a61");
        grd.addColorStop(0.5, "#2a204e");
        grd.addColorStop(1, "#081231");
        ctx.fillStyle = grd;
        ctx.fillRect(0, 0, 320, 200);

        ctx.transform(1.4, 0, 0, 1.4, 0, 0);
        ctx.translate(0, 42);

        ctx.fillStyle = "#7b586e";
        ctx.fill(mtn_5_1);

        ctx.fillStyle = "#4c3059";
        ctx.fill(mtn_4_1);

        ctx.fillStyle = "#332649";
        ctx.fill(mtn_3_1);
        ctx.fill(mtn_3_2);

        var pondGrd = ctx.createLinearGradient(0, 0, 0, 140);
        pondGrd.addColorStop(0.42, "#6a4a61");
        pondGrd.addColorStop(0.5, "#2a204e");
        pondGrd.addColorStop(0.55, "#081231");

        ctx.fillStyle = pondGrd;
        ctx.fill(pond_1);

        ctx.fillStyle = "#24203e";
        ctx.fill(mtn_2_1);

        ctx.fillStyle = "#1b1d39";
        ctx.fill(mtn_1_1);
        ctx.fill(mtn_1_2);
        ctx.fill(elk_3);

        ctx.setTransform(1, 0, 0, 1, 0, 0);
        break;
      case 4:
      case 5:
        currentImage = img1;

        var grd = ctx.createRadialGradient(160, 150, 5, 160, 150, 200);
        grd.addColorStop(0, "#a06a73");
        grd.addColorStop(0.5, "#67326a");
        grd.addColorStop(1, "#151638");

        ctx.fillStyle = grd;
        ctx.fillRect(0, 0, 320, 200);

        ctx.transform(1.4, 0, 0, 1.4, 0, 0);
        ctx.translate(0, 42);

        ctx.fillStyle = "#82296F";
        ctx.fill(mtn_5_1);

        ctx.fillStyle = "#75316F";
        ctx.fill(mtn_4_1);

        ctx.fillStyle = "#652D6A";
        ctx.fill(mtn_3_1);
        ctx.fill(mtn_3_2);

        var pondGrd = ctx.createLinearGradient(0, 0, 0, 140);
        pondGrd.addColorStop(0.42, "#a06a73");
        pondGrd.addColorStop(0.5, "#67326a");
        pondGrd.addColorStop(0.55, "#151638");

        ctx.fillStyle = pondGrd;
        ctx.fill(pond_1);

        ctx.fillStyle = "#34235A";
        ctx.fill(mtn_2_1);

        ctx.fillStyle = "#24244c";
        ctx.fill(mtn_1_1);
        ctx.fill(mtn_1_2);
        ctx.fill(elk_1);

        ctx.setTransform(1, 0, 0, 1, 0, 0);

        break;
      case 6:
      case 7:
        currentImage = img2;

        var grd = ctx.createRadialGradient(160, 150, 5, 160, 150, 200);
        grd.addColorStop(0, "#F5949E");
        grd.addColorStop(0.5, "#E05298");
        grd.addColorStop(1, "#372854");
        ctx.fillStyle = grd;
        ctx.fillRect(0, 0, 320, 200);

        ctx.fillStyle = "rgba(252, 209, 195,0.15)";
        ctx.beginPath();
        ctx.arc(200, 125, 30, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(252, 209, 195,0.2)";
        ctx.beginPath();
        ctx.arc(200, 125, 25, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(252, 209, 195,0.25)";
        ctx.beginPath();
        ctx.arc(200, 125, 20, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(252, 209, 195,0.30)";
        ctx.beginPath();
        ctx.arc(200, 125, 15, 0, Math.PI * 2);
        ctx.fill();

        ctx.transform(1.4, 0, 0, 1.4, 0, 0);
        ctx.translate(0, 42);

        ctx.fillStyle = "#ACA0B4";
        ctx.fill(mtn_5_1);

        ctx.fillStyle = "#7684A5";
        ctx.fill(mtn_4_1);

        ctx.fillStyle = "#4d6f94";
        ctx.fill(mtn_3_1);
        ctx.fill(mtn_3_2);

        var pondGrd = ctx.createLinearGradient(0, 0, 0, 140);
        pondGrd.addColorStop(0.45, "#f5919e");
        pondGrd.addColorStop(0.5, "#EF5A9B");
        pondGrd.addColorStop(0.55, "#ba4d90");

        ctx.fillStyle = pondGrd;
        ctx.fill(pond_1);

        ctx.fillStyle = "#2a4e71";
        ctx.fill(mtn_2_1);

        ctx.fillStyle = "#194062";
        ctx.fill(mtn_1_1);
        ctx.fill(mtn_1_2);
        ctx.fill(elk_1);

        ctx.setTransform(1, 0, 0, 1, 0, 0);

        break;
      case 8:
      case 9:
        currentImage = img3;

        var grd = ctx.createRadialGradient(160, 150, 5, 160, 150, 200);
        grd.addColorStop(0.1, "#ebc79d");
        grd.addColorStop(0.5, "#a5b3bb");
        grd.addColorStop(1, "#104c70");
        ctx.fillStyle = grd;
        ctx.fillRect(0, 0, 320, 200);

        ctx.fillStyle = "rgba(247, 228, 198,0.25)";
        ctx.beginPath();
        ctx.arc(193, 102, 30, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(247, 228, 198,0.3)";
        ctx.beginPath();
        ctx.arc(193, 102, 25, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(247, 228, 198,0.35)";
        ctx.beginPath();
        ctx.arc(193, 102, 20, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 255, 255,0.4)";
        ctx.beginPath();
        ctx.arc(193, 102, 15, 0, Math.PI * 2);
        ctx.fill();

        ctx.transform(1.4, 0, 0, 1.4, 0, 0);
        ctx.translate(0, 42);

        ctx.fillStyle = "#aadbd1";
        ctx.fill(mtn_5_1);

        ctx.fillStyle = "#3f95b7";
        ctx.fill(mtn_4_1);

        ctx.fillStyle = "#1d6e87";
        ctx.fill(mtn_3_1);
        ctx.fill(mtn_3_2);

        var pondGrd = ctx.createLinearGradient(0, 0, 0, 140);
        pondGrd.addColorStop(0.45, "#ebc79d");
        pondGrd.addColorStop(0.5, "#a5b3bb");
        pondGrd.addColorStop(0.55, "#104c70");

        ctx.fillStyle = pondGrd;
        ctx.fill(pond_1);

        ctx.fillStyle = "#155567";
        ctx.fill(mtn_2_1);

        ctx.fillStyle = "#123647";
        ctx.fill(mtn_1_1);
        ctx.fill(mtn_1_2);
        ctx.fill(elk_1);

        ctx.setTransform(1, 0, 0, 1, 0, 0);
        break;
      case 10:
      case 11:
        currentImage = img4;

        var grd = ctx.createRadialGradient(160, 150, 5, 160, 150, 200);
        grd.addColorStop(0.1, "#b0d0cd");
        grd.addColorStop(0.5, "#4c92bc");
        grd.addColorStop(1, "#12426F");
        ctx.fillStyle = grd;
        ctx.fillRect(0, 0, 320, 200);

        ctx.fillStyle = "rgba(247, 228, 198,0.25)";
        ctx.beginPath();
        ctx.arc(180, 85, 30, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(247, 228, 198,0.3)";
        ctx.beginPath();
        ctx.arc(180, 85, 25, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(247, 228, 198,0.35)";
        ctx.beginPath();
        ctx.arc(180, 85, 20, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 255, 255,0.4)";
        ctx.beginPath();
        ctx.arc(180, 85, 15, 0, Math.PI * 2);
        ctx.fill();

        ctx.transform(1.4, 0, 0, 1.4, 0, 0);
        ctx.translate(0, 42);

        ctx.fillStyle = "#569ECB";
        ctx.fill(mtn_5_1);

        ctx.fillStyle = "#2b739d";
        ctx.fill(mtn_4_1);

        ctx.fillStyle = "#225b78";
        ctx.fill(mtn_3_1);
        ctx.fill(mtn_3_2);

        var pondGrd = ctx.createLinearGradient(0, 0, 0, 140);
        pondGrd.addColorStop(0.45, "#b0d0cd");
        pondGrd.addColorStop(0.5, "#4c92bc");
        pondGrd.addColorStop(0.55, "#12426F");

        ctx.fillStyle = pondGrd;
        ctx.fill(pond_1);

        ctx.fillStyle = "#144557";
        ctx.fill(mtn_2_1);

        ctx.fillStyle = "#112538";
        ctx.fill(mtn_1_1);
        ctx.fill(mtn_1_2);
        ctx.fill(elk_1);

        ctx.setTransform(1, 0, 0, 1, 0, 0);
        break;
      case 12:
      case 13:
        currentImage = img5;

        var grd = ctx.createRadialGradient(160, 150, 5, 160, 150, 200);
        grd.addColorStop(0.1, "#8fd1e2");
        grd.addColorStop(0.5, "#4996c9");
        grd.addColorStop(1, "#173e6f");
        ctx.fillStyle = grd;
        ctx.fillRect(0, 0, 320, 200);

        ctx.fillStyle = "rgba(255, 255, 255,0.25)";
        ctx.beginPath();
        ctx.arc(155, 80, 30, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 255, 255,0.3)";
        ctx.beginPath();
        ctx.arc(155, 80, 25, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 255, 255,0.35)";
        ctx.beginPath();
        ctx.arc(155, 80, 20, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 255, 255,0.4)";
        ctx.beginPath();
        ctx.arc(155, 80, 15, 0, Math.PI * 2);
        ctx.fill();

        ctx.transform(1.4, 0, 0, 1.4, 0, 0);
        ctx.translate(0, 42);

        ctx.fillStyle = "#4d8fbd";
        ctx.fill(mtn_5_1);

        ctx.fillStyle = "#2f6891";
        ctx.fill(mtn_4_1);

        ctx.fillStyle = "#285e82";
        ctx.fill(mtn_3_1);
        ctx.fill(mtn_3_2);

        var pondGrd = ctx.createLinearGradient(0, 0, 0, 140);
        pondGrd.addColorStop(0.45, "#8fd1e2");
        pondGrd.addColorStop(0.5, "#4996c9");
        pondGrd.addColorStop(0.55, "#173e6f");

        ctx.fillStyle = pondGrd;
        ctx.fill(pond_1);

        ctx.fillStyle = "#154055";
        ctx.fill(mtn_2_1);

        ctx.fillStyle = "#122539";
        ctx.fill(mtn_1_1);
        ctx.fill(mtn_1_2);
        ctx.fill(elk_2);

        ctx.setTransform(1, 0, 0, 1, 0, 0);
        break;
      case 14:
      case 15:
        currentImage = img6;

        var grd = ctx.createRadialGradient(160, 150, 5, 160, 150, 200);
        grd.addColorStop(0.1, "#a3ccc6");
        grd.addColorStop(0.5, "#70b0c4");
        grd.addColorStop(1, "#22426b");
        ctx.fillStyle = grd;
        ctx.fillRect(0, 0, 320, 200);

        ctx.fillStyle = "rgba(255, 252, 184,0.25)";
        ctx.beginPath();
        ctx.arc(139, 87, 30, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 252, 184,0.3)";
        ctx.beginPath();
        ctx.arc(139, 87, 25, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 252, 184,0.35)";
        ctx.beginPath();
        ctx.arc(139, 87, 20, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 252, 184,0.4)";
        ctx.beginPath();
        ctx.arc(139, 87, 15, 0, Math.PI * 2);
        ctx.fill();

        ctx.transform(1.4, 0, 0, 1.4, 0, 0);
        ctx.translate(0, 42);

        ctx.fillStyle = "#548aa1";
        ctx.fill(mtn_5_1);

        ctx.fillStyle = "#306788";
        ctx.fill(mtn_4_1);

        ctx.fillStyle = "#275F81";
        ctx.fill(mtn_3_1);
        ctx.fill(mtn_3_2);

        var pondGrd = ctx.createLinearGradient(0, 0, 0, 140);
        pondGrd.addColorStop(0.45, "#a3ccc6");
        pondGrd.addColorStop(0.5, "#70b0c4");
        pondGrd.addColorStop(0.55, "#22426b");

        ctx.fillStyle = pondGrd;
        ctx.fill(pond_1);

        ctx.fillStyle = "#1b445f";
        ctx.fill(mtn_2_1);

        ctx.fillStyle = "#162d48";
        ctx.fill(mtn_1_1);
        ctx.fill(mtn_1_2);
        ctx.fill(elk_2);

        ctx.setTransform(1, 0, 0, 1, 0, 0);
        break;
      case 16:
      case 17:
        currentImage = img7;

        var grd = ctx.createRadialGradient(160, 150, 5, 160, 150, 200);
        grd.addColorStop(0.1, "#baaf94");
        grd.addColorStop(0.5, "#95aca9");
        grd.addColorStop(1, "#264066");
        ctx.fillStyle = grd;
        ctx.fillRect(0, 0, 320, 200);

        ctx.fillStyle = "rgba(255, 186, 36,0.25)";
        ctx.beginPath();
        ctx.arc(128, 100, 30, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 186, 36,0.3)";
        ctx.beginPath();
        ctx.arc(128, 100, 25, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 186, 36,0.35)";
        ctx.beginPath();
        ctx.arc(128, 100, 20, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 186, 36,0.4)";
        ctx.beginPath();
        ctx.arc(128, 100, 15, 0, Math.PI * 2);
        ctx.fill();

        ctx.transform(1.4, 0, 0, 1.4, 0, 0);
        ctx.translate(0, 42);

        ctx.fillStyle = "#7a6a6d";
        ctx.fill(mtn_5_1);

        ctx.fillStyle = "#524c66";
        ctx.fill(mtn_4_1);

        ctx.fillStyle = "#484661";
        ctx.fill(mtn_3_1);
        ctx.fill(mtn_3_2);

        var pondGrd = ctx.createLinearGradient(0, 0, 0, 140);
        pondGrd.addColorStop(0.45, "#baaf94");
        pondGrd.addColorStop(0.5, "#95aca9");
        pondGrd.addColorStop(0.55, "#264066");

        ctx.fillStyle = pondGrd;
        ctx.fill(pond_1);

        ctx.fillStyle = "#333957";
        ctx.fill(mtn_2_1);

        ctx.fillStyle = "#232c4b";
        ctx.fill(mtn_1_1);
        ctx.fill(mtn_1_2);
        ctx.fill(elk_1);

        ctx.setTransform(1, 0, 0, 1, 0, 0);
        break;
      case 18:
      case 19:
        currentImage = img8;

        var grd = ctx.createRadialGradient(160, 150, 5, 160, 150, 200);
        grd.addColorStop(0.1, "#db6e45");
        grd.addColorStop(0.5, "#845974");
        grd.addColorStop(1, "#223056");
        ctx.fillStyle = grd;
        ctx.fillRect(0, 0, 320, 200);

        ctx.fillStyle = "rgba(255, 60, 0,0.25)";
        ctx.beginPath();
        ctx.arc(125, 110, 30, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 60, 0,0.3)";
        ctx.beginPath();
        ctx.arc(125, 110, 25, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 60, 0,0.35)";
        ctx.beginPath();
        ctx.arc(125, 110, 20, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "rgba(255, 60, 0,0.4)";
        ctx.beginPath();
        ctx.arc(125, 110, 15, 0, Math.PI * 2);
        ctx.fill();

        ctx.transform(1.4, 0, 0, 1.4, 0, 0);
        ctx.translate(0, 42);

        ctx.fillStyle = "#ab5f47";
        ctx.fill(mtn_5_1);

        ctx.fillStyle = "#804149";
        ctx.fill(mtn_4_1);

        ctx.fillStyle = "#683248";
        ctx.fill(mtn_3_1);
        ctx.fill(mtn_3_2);

        var pondGrd = ctx.createLinearGradient(0, 0, 0, 140);
        pondGrd.addColorStop(0.45, "#db6e45");
        pondGrd.addColorStop(0.5, "#845974");
        pondGrd.addColorStop(0.55, "#223056");

        ctx.fillStyle = pondGrd;
        ctx.fill(pond_1);

        ctx.fillStyle = "#3a2846";
        ctx.fill(mtn_2_1);

        ctx.fillStyle = "#27213e";
        ctx.fill(mtn_1_1);
        ctx.fill(mtn_1_2);
        ctx.fill(elk_1);

        ctx.setTransform(1, 0, 0, 1, 0, 0);
        break;
      case 20:
      case 21:
        currentImage = img9;

        var grd = ctx.createRadialGradient(160, 150, 5, 160, 150, 200);
        grd.addColorStop(0.1, "#966f5e");
        grd.addColorStop(0.5, "#4c4365");
        grd.addColorStop(1, "#0f1836");
        ctx.fillStyle = grd;
        ctx.fillRect(0, 0, 320, 200);

        ctx.transform(1.4, 0, 0, 1.4, 0, 0);
        ctx.translate(0, 42);

        ctx.fillStyle = "#373a5b";
        ctx.fill(mtn_5_1);

        ctx.fillStyle = "#292d4a";
        ctx.fill(mtn_4_1);

        ctx.fillStyle = "#232742";
        ctx.fill(mtn_3_1);
        ctx.fill(mtn_3_2);

        var pondGrd = ctx.createLinearGradient(0, 0, 0, 140);
        pondGrd.addColorStop(0.45, "#966f5e");
        pondGrd.addColorStop(0.5, "#4c4365");
        pondGrd.addColorStop(0.55, "#0f1836");

        ctx.fillStyle = pondGrd;
        ctx.fill(pond_1);

        ctx.fillStyle = "#1b2039";
        ctx.fill(mtn_2_1);

        ctx.fillStyle = "#151a31";
        ctx.fill(mtn_1_1);
        ctx.fill(mtn_1_2);
        ctx.fill(elk_1);

        ctx.setTransform(1, 0, 0, 1, 0, 0);
        break;
      case 22:
      case 23:
        currentImage = img10;
        var grd = ctx.createRadialGradient(160, 150, 5, 160, 150, 100);
        grd.addColorStop(0.1, "#56584c");
        grd.addColorStop(0.5, "#142346");
        grd.addColorStop(1, "#071030");
        ctx.fillStyle = grd;
        ctx.fillRect(0, 0, 320, 200);

        ctx.transform(1.4, 0, 0, 1.4, 0, 0);
        ctx.translate(0, 42);

        ctx.fillStyle = "#1a2d49";
        ctx.fill(mtn_5_1);

        ctx.fillStyle = "#172741";
        ctx.fill(mtn_4_1);

        ctx.fillStyle = "#162033";
        ctx.fill(mtn_3_1);
        ctx.fill(mtn_3_2);

        var pondGrd = ctx.createLinearGradient(0, 0, 0, 140);
        pondGrd.addColorStop(0.4, "#56584c");
        pondGrd.addColorStop(0.5, "#142346");
        pondGrd.addColorStop(0.55, "#071030");

        ctx.fillStyle = pondGrd;
        ctx.fill(pond_1);

        ctx.fillStyle = "#121927";
        ctx.fill(mtn_2_1);

        ctx.fillStyle = "#0a1223";
        ctx.fill(mtn_1_1);
        ctx.fill(mtn_1_2);
        ctx.fill(elk_3);

        ctx.setTransform(1, 0, 0, 1, 0, 0);
        break;
    }

    //ctx.drawImage(currentImage, 0, 0);

    if (motionEffects) {
      if (currentImage == img1) {
        //slowBreatheEffect(160, 120, 5, "#fc7f03", 0 * Math.PI, 2 * Math.PI);
        if (stars.length < 1) {
          if (Math.round(Math.random()) == 1) {
            stars.push(new FallingStar2());
          } else {
            stars.push(new FallingStar());
          }
        }

        for (let i = 0; i < stars.length; i++) {
          stars[i].Draw();

          if (stars[i].IsFinished() == true) {
            stars.splice(i, 1);
          }
        }
        for (let i = 0; i < starTwinkles.length; i++) {
          starTwinkles[i].Draw();
          if (starTwinkles[i].IsFinished() == true) {
            starTwinkles.splice(i, 1);
          }
        }
      } else if (currentImage == img2) {
        slowBreatheEffectHalf(200, 125, 5, "#ff0080", 0 * Math.PI, 2 * Math.PI);
      } else if (currentImage == img3) {
        slowBreatheEffectHalf(193, 102, 5, "#fc7f03", 0 * Math.PI, 2 * Math.PI);
      } else if (currentImage == img4) {
        slowBreatheEffectHalf(180, 85, 5, "#ffffff", 0 * Math.PI, 2 * Math.PI);
      } else if (currentImage == img5) {
        slowBreatheEffectHalf(155, 80, 5, "#ffffff", 0 * Math.PI, 2 * Math.PI);
      } else if (currentImage == img6) {
        slowBreatheEffectHalf(139, 87, 5, "#fffcb8", 0 * Math.PI, 2 * Math.PI);
      } else if (currentImage == img7) {
        slowBreatheEffectHalf(128, 100, 5, "#ffba24", 0 * Math.PI, 2 * Math.PI);
      } else if (currentImage == img8) {
        slowBreatheEffectHalf(125, 110, 5, "#ff3c00", 0 * Math.PI, 2 * Math.PI);
      } else if (currentImage == img9) {
        //slowBreatheEffect(160, 110, 5, "#ff8661", 0 * Math.PI, 2 * Math.PI);
        if (stars.length < 1) {
          if (Math.round(Math.random()) == 1) {
            stars.push(new FallingStar2());
          } else {
            stars.push(new FallingStar());
          }
        }

        for (let i = 0; i < stars.length; i++) {
          stars[i].Draw();

          if (stars[i].IsFinished() == true) {
            stars.splice(i, 1);
          }
        }
        for (let i = 0; i < starTwinkles.length; i++) {
          starTwinkles[i].Draw();
          if (starTwinkles[i].IsFinished() == true) {
            starTwinkles.splice(i, 1);
          }
        }
      } else if (currentImage == img10) {
        if (stars.length < 1) {
          if (Math.round(Math.random()) == 1) {
            stars.push(new FallingStar2());
          } else {
            stars.push(new FallingStar());
          }
        }

        for (let i = 0; i < stars.length; i++) {
          stars[i].Draw();

          if (stars[i].IsFinished() == true) {
            stars.splice(i, 1);
          }
        }
        for (let i = 0; i < starTwinkles.length; i++) {
          starTwinkles[i].Draw();
          if (starTwinkles[i].IsFinished() == true) {
            starTwinkles.splice(i, 1);
          }
        }
      } else if (currentImage == img11) {
        //slowBreatheEffect(160, 110, 5, "#ffa98f", 0 * Math.PI, 2 * Math.PI);

        if (stars.length < 1) {
          if (Math.round(Math.random()) == 1) {
            stars.push(new FallingStar2());
          } else {
            stars.push(new FallingStar());
          }
        }

        for (let i = 0; i < stars.length; i++) {
          stars[i].Draw();

          if (stars[i].IsFinished() == true) {
            stars.splice(i, 1);
          }
        }
        for (let i = 0; i < starTwinkles.length; i++) {
          starTwinkles[i].Draw();
          if (starTwinkles[i].IsFinished() == true) {
            starTwinkles.splice(i, 1);
          }
        }
      } else if (currentImage == img12) {
        //slowBreatheEffect(160, 110, 5, "#ff784f", 0 * Math.PI, 2 * Math.PI);

        if (stars.length < 1) {
          if (Math.round(Math.random()) == 1) {
            stars.push(new FallingStar2());
          } else {
            stars.push(new FallingStar());
          }
        }

        for (let i = 0; i < stars.length; i++) {
          stars[i].Draw();

          if (stars[i].IsFinished() == true) {
            stars.splice(i, 1);
          }
        }
        for (let i = 0; i < starTwinkles.length; i++) {
          starTwinkles[i].Draw();
          if (starTwinkles[i].IsFinished() == true) {
            starTwinkles.splice(i, 1);
          }
        }
      }
    }

    window.requestAnimationFrame(update);
  }

  window.requestAnimationFrame(update);

  var degs = [];
  var birds = [];
  var starTwinkles = [];

  const starCoords = [
    [10, 7],
    [60, 10],
    [100, 5],
    [150, 10],
    [180, 8],
    [230, 15],
    [270, 10],

    [21, 25],
    [58, 30],
    [113, 20],
    [155, 24],
    [192, 30],
    [215, 35],
    [243, 30],
    [298, 24],

    [21, 40],
    [58, 48],
    [113, 52],
    [155, 45],
    [192, 56],
    [215, 35],
    [243, 57],
    [298, 48],

    [75, 70],
    [100, 76],
    [130, 73],
    [163, 82],
    [190, 91],
  ];

  var starMeter = new Meter(1, remakeStars);

  function remakeStars() {
    starTwinkles.length = 0;
    for (let i = 0; i < 15; i++) {
      starTwinkles.push(new StarTwinkle());
    }
  }

  remakeStars();

  for (let i = 0; i < 90; i++) {
    var randomNum = intFromRange(-1000, 50);
    if (randomNum < 1) {
      randomNum = 0;
    }
    var opacity = Math.round(randomNum).toString(16);
    var dir = Math.round(Math.random() * 1);
    degs.push([i * 4, opacity, dir]);
  }

  function slowBreatheEffectHalf(x, y, dia, color, angle1, angle2) {
    for (let i = 0; i < degs.length; i++) {
      const deg = degs[i];
      if (deg[2] == 1) {
        degs[i][0] += Math.random() * 0.1;
      } else {
        degs[i][0] -= Math.random() * 0.1;
      }
      var rad = deg[0] * (Math.PI / 180);
      var eX = 55 * Math.cos(rad) + x;
      var eY = 40 * Math.sin(rad) + y;

      ctx.beginPath();
      ctx.lineWidth = 4;
      ctx.strokeStyle = color + deg[1];
      ctx.moveTo(x, y);
      ctx.lineTo(eX, eY);
      ctx.stroke();
    }

    if (bp < 50) {
      bp += 0.05;
    } else {
      bp = 0;
    }

    if (bp < 25) {
      ctx.fillStyle = color + "22";
      ctx.beginPath();
      ctx.arc(x, y, dia + bp * 1.5, angle1, angle2);
      ctx.fill();

      ctx.fillStyle = color + "2f";
      ctx.beginPath();
      ctx.arc(x, y, dia + bp * 1, angle1, angle2);
      ctx.fill();

      ctx.fillStyle = color + "33";
      ctx.beginPath();
      ctx.arc(x, y, dia + bp * 0.5, angle1, angle2);
      ctx.fill();
    } else {
      var opposite = 50 - bp;
      ctx.fillStyle = color + "22";
      ctx.beginPath();
      ctx.arc(x, y, dia + opposite * 1.5, angle1, angle2);
      ctx.fill();

      ctx.fillStyle = color + "2F";
      ctx.beginPath();
      ctx.arc(x, y, dia + opposite * 1, angle1, angle2);
      ctx.fill();

      ctx.fillStyle = color + "33";
      ctx.beginPath();
      ctx.arc(x, y, dia + opposite * 0.5, angle1, angle2);
      ctx.fill();
    }

    if (birds.length < 1) {
      birds.push(new Bird());
    }

    for (let i = 0; i < birds.length; i++) {
      birds[i].Draw();

      if (birds[i].IsFinished() == true) {
        birds.splice(i, 1);
      }
    }
  }

  function FallingStar() {
    this.x = Math.random() * 50;
    this.y = Math.random() * 50 + 10;
    this.pos = [];
    this.poslength = 40;
    this.lifetime = 0;
    this.starsToShow = 40;
    this.yBias = intFromRange(-10, 10) * 0.01;
    this.xBias = intFromRange(4, 8) * 0.4;

    this.Draw = function () {
      this.x += this.xBias;
      this.y += this.yBias;

      this.lifetime++;
      this.pos.push([this.x, this.y]);

      if (this.lifetime < 65) {
        if (this.pos.length > 40) {
          this.pos.splice(0, 1);
        }

        for (let i = 0; i < this.pos.length; i++) {
          const star = this.pos[i];
          var opacity = i / this.pos.length;
          ctx.fillStyle = "rgba(220,220,220," + opacity + ")";
          ctx.beginPath();
          ctx.arc(star[0], star[1], 3, 0, Math.PI * 2);
          ctx.fill();
        }
      } else {
        for (let i = 0; i < this.starsToShow; i++) {
          const star = this.pos[i];
          var opacity = i / this.pos.length;
          ctx.fillStyle = "rgba(220,220,220," + opacity + ")";
          ctx.beginPath();
          ctx.arc(star[0], star[1], 3, 0, Math.PI * 2);
          ctx.fill();
        }
        this.starsToShow -= 0.5;
        if (this.pos.length > 40) {
          this.pos.splice(0, 1);
        }
      }
    };

    this.IsFinished = function () {
      if (this.lifetime > 250) {
        return true;
      } else {
        return false;
      }
    };
  }

  function FallingStar2() {
    this.x = Math.random() * 50 + 250;
    this.y = Math.random() * 50 + 10;
    this.pos = [];
    this.poslength = 40;
    this.lifetime = 0;
    this.starsToShow = 40;
    this.yBias = intFromRange(-10, 10) * 0.01;
    this.xBias = intFromRange(-8, -4) * 0.4;

    this.Draw = function () {
      this.x += this.xBias;
      this.y += this.yBias;

      this.lifetime++;
      this.pos.push([this.x, this.y]);

      if (this.lifetime < 65) {
        if (this.pos.length > 40) {
          this.pos.splice(0, 1);
        }

        for (let i = 0; i < this.pos.length; i++) {
          const star = this.pos[i];
          var opacity = i / this.pos.length;
          ctx.fillStyle = "rgba(220,220,220," + opacity + ")";
          ctx.beginPath();
          ctx.arc(star[0], star[1], 3, 0, Math.PI * 2);
          ctx.fill();
        }
      } else {
        for (let i = 0; i < this.starsToShow; i++) {
          const star = this.pos[i];
          var opacity = i / this.pos.length;
          ctx.fillStyle = "rgba(220,220,220," + opacity + ")";
          ctx.beginPath();
          ctx.arc(star[0], star[1], 3, 0, Math.PI * 2);
          ctx.fill();
        }
        this.starsToShow -= 0.5;
        if (this.pos.length > 40) {
          this.pos.splice(0, 1);
        }
      }
    };

    this.IsFinished = function () {
      if (this.lifetime > 250) {
        return true;
      } else {
        return false;
      }
    };
  }

  function Bird() {
    this.x = -10;
    this.y = Math.random() * 60;
    this.yDirection = Math.round(Math.random() * 1);
    this.flapTimer = 0;

    this.Draw = function () {
      this.x += 0.5;
      if (this.yDirection == 1) {
        this.y += Math.random() * 0.01;
      } else {
        this.y -= Math.random() * 0.01;
      }

      if (this.flapTimer < 100) {
        this.flapTimer++;
      } else {
        this.flapTimer = 0;
      }
      ctx.transform(0.5, 0, 0, 0.5, 0, 0);
      if (this.flapTimer < 50) {
        ctx.translate(this.x, this.y);
        ctx.fillStyle = "black";
        ctx.fill(bird_1)
      } else {
        ctx.translate(this.x, this.y + 20);
        ctx.fillStyle = "black";
        ctx.fill(bird_2)
      }
      ctx.setTransform(1, 0, 0, 1, 0, 0);
    };

    this.IsFinished = function () {
      if (this.x > 600) {
        return true;
      } else {
        return false;
      }
    };
  }

  function StarTwinkle() {
    this.coords = starCoords[Math.floor(Math.random() * starCoords.length)];
    this.x = this.coords[0];
    this.y = this.coords[1];
    this.alpha = Math.random();
    this.dir = Math.round(Math.random());

    this.Draw = function () {
      if (this.dir == 1) {
        this.alpha += Math.random() * 0.01;
      } else {
        this.alpha -= Math.random() * 0.01;
      }

      if (this.alpha > 1) {
        this.dir = 0;
      } else if (this.alpha < 0) {
        this.dir = 1;
      }
      ctx.fillStyle = "rgba(255,255,255," + this.alpha;
      ctx.fillRect(this.x, this.y, 3, 2);
    };

    this.IsFinished = function () {
      return false;
    };
  }

  function intFromRange(min, max) {
    // min and max included
    return Math.floor(Math.random() * (max - min + 1) + min);
  }

  function Meter(count, callback) {
    this.size = count;
    this.value = 0;
    this.diff = 0;
    this.increased = false;
    this.decreased = false;
    var values = [];

    this.setValue = function (updatedValue) {
      // Add and shift.
      values.push(updatedValue);
      if (values.length > this.size) {
        values.shift();
      }

      // Exit early if we've got a long-term match.
      for (var i = 0; i < values.length - 1; i++) {
        if (values[i] !== values[i + 1]) return;
      }

      // We got here, so weve got a matching value collection.
      if (this.value !== values[0]) {
        //var fromZero = this.value === 0;
        //var toZero = values[0] === 0;
        this.diff = Math.abs(this.value - values[0]);
        this.increased = this.value < values[0];
        this.decreased = this.value > values[0];
        this.value = values[0];
        callback();
      }
    };
  }
  //engine.zone
</script>
