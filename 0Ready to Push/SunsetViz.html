<head>
  <title>Sunset Visualizer</title>
  <meta description="A chill visualizer effect." />
  <meta publisher="SignalRGB" />
  <meta
    property="color"
    label="Color"
    type="color"
    min="0"
    max="360"
    default="#ee922f"
  />
  <meta
    property="sense"
    label="Sensitivity"
    type="number"
    min="1"
    max="10"
    default="5"
  />
</head>

<body style="margin: 0; padding: 0">
  <canvas id="exCanvas" width="320" height="200"></canvas>
</body>

<script>
  var c = document.getElementById("exCanvas");
  var ctx = c.getContext("2d");
  var width = 320;
  var height = 200;
  var sense = 5;

  var color = "#ee922f";
  var alpha = 100;

  const tree01_1_data =
    "M217.59,200l2.68-5.74,7.9-2.68L221,183.23l8.79,8.38,5.37,1.61-4.32-8.2,4.32,5.22,1.49-7L241,188.6l13.42-11.48,2.09-3.58V147.45l-11.63,8.8,10.43-10.14,1.2-8.64-8.35,1.19,10.58-13-1.19-4.47-10,9.24-.44-4-9-.14,8.65-1.79,9.54-4.33-.6-4.43-11,3.84-4.32-.3.15-1.94,7.75-4.17,3.28-3.88,4.32-4.92,1.19-6.11-8.2,7.31L246.66,103l-7.16,2.24-1.34-6.11,15.65-9.1,1.79-4.47,1-3.73-6.41,4.33-7.31-.3L256.2,74.56l-15.5,7.3,14.75-10.43-12.37,6.11-4-1.64L248,68.15l3.73-7.45,4.62-7.61-8.8,3.43,6.86-9.24,3.58-13L244.27,48.17l-4.32.9V47.13L254.71,35.2l-1.19-3L247.25,40l-2.68-.9,8.2-9.24,5.07-12.67-.75-1.94-7.9,15.2-4.77,1.05L255.6,10.61,256.5,0h8.79l5.82,11.8-2.09,1-6.56-7.75,4,29.07,7.31,16.25-9.09-3.58c-.75-.3,11.62,17.59,11.62,17.59l-5.66.3,11,9.54-17-4.32,11.18,10L263.5,72l17.15,32.65-2.39,1.79L268,95.88l3.42,15.05,11.48,12.52-4.32,4L266.48,119l1.94,50.39L304.05,168V126.58l-11.93,9.69,11.18-15.65s-16.54,8.5-17,8.8,17.74-17.89,17.74-17.89-13,4.32-14.91,6.26S299,102.14,299,102.14l-15.05,10.58L299.13,91l1.34-10.44L283.93,95.43l14.6-21.91L282.58,87.83l15.36-33.4-8.05,2.39,6-10.29L299,34.16l.6-18L299.28.77,317.47,0l3.87,9.42L320,32.52,311.65,23l.6,19.68,5.36,9.09-5.36,3-.15,16.4,1.79,23.26,5.22-4.18.89,14.31-5.66,1-.15,9.54,3.42,4-4-.74-.3,17v32.05l6.71,1.79V200";
  const tree01_1_path = new Path2D(tree01_1_data);
  const tree01_2_data =
    "M59.58 174.58 60.77 141.64 56.3 146.41 54.51 144.62 59.13 137.91 58.38 133.89 52.42 132.25 47.5 132.25 58.38 121.07 55.4 117.64 48.4 123.3 58.09 113.47 57.79 108.84 54.14 112.72 54.96 108.84 59.13 101.54 54.14 108.84 51.68 106.91 58.53 100 57.79 93.34 51.83 99.16 50.19 94.83 57.94 85.29 57.94 81.71 53.17 87.38 59.28 73.81 59.28 72.03 52.57 78.73 51.68 74.26 56.89 68.89 59.73 55.63 53.32 62.93 59.43 53.09 63.75 9.42 66.44 39.68 74.04 55.63 65.54 46.53 69.42 66.51 68.67 68.89 65.84 59.95 67.78 75.01 73.29 85.44 67.78 87.23 78.06 102.88 77.17 106.76 67.18 96.62 71.35 107.8 68.67 111.53 78.06 126.14 67.78 119.13 70.76 127.78 78.06 137.32 74.78 140.89 65.54 132.84 65.6 182.93 60.47 185.02";
  const tree01_2_path = new Path2D(tree01_2_data);
  const tree01_3_data =
    "M41.39 183.53 41.39 182.78 41.39 103.63 33.49 110.78 32.6 106.76 42.29 100 42.29 92.89 35.58 101.99 42.29 91.11 41.39 87.23 36.02 93.79 34.38 90.81 42.29 85.14 42.29 78.73 36.62 87.23 35.28 84.55 42.29 75.9 42.29 68.6 38.26 77.09 36.47 76.35 41.39 66.06 42.29 49.52 36.02 57.27 35.28 55.92 41.39 48.17 44.97 40.87 44.97 31.48 46.91 31.48 46.91 41.91 50.78 48.62 49.89 50.26 45.56 46.09 45.86 59.2 48.4 51.01 49.89 53.24 46.76 59.95 46.01 66.06 48.99 68.75 48.1 70.83 45.56 68.6 49.44 76.5 48.25 78.14 44.82 72.47 45.42 82.31 50.78 91.55 49.74 94.09 44.67 84.1 45.86 98.11 50.78 105.86 44.82 101.54 44.22 183.53 52.87 173.69 55.85 186.96 59.28 184.72 58.53 179.06 60.47 185.02 67.78 182.04 68.97 189.79 78.06 194.86 78.06 197.54 91.48 200 41.39 200 38.59 183.84";
  const tree01_3_path = new Path2D(tree01_3_data);
  const tree01_4_data =
    "M0 0 14.11 0 15.01 7.18 17.69 15.23 21.86 19.7 15.01 14.19 13.22 11.21 14.71 23.43 19.33 36.25 23.5 41.76 21.71 42.51 12.62 34.46 23.5 46.98 22.01 48.17 11.75 37.74 18.43 54.88 29.61 67.25 25.59 68.89 16.2 59.95 17.09 65.17 24.7 70.53 22.61 72.32 17.24 69.19 17.24 71.13 25.59 76.5 26.78 80.67 18.29 80.67 13.96 78.44 18.29 87.23 21.57 91.7 27.68 94.68 29.61 97.37 23.06 97.37 20.07 94.39 19.33 97.37 31.4 105.12 29.47 108.4 20.07 105.86 12.62 108.4 20.67 111.83 19.93 120.03 24.25 122.86 25.14 127.48 33.19 129.56 23.95 133.44 28.42 136.27 31.4 134.63 31.7 136.27 29.91 137.91 34.98 145.66 30.21 155.5 34.69 170.66 39.16 185.76 41.39 200 0 200";
  const tree01_4_path = new Path2D(tree01_4_data);

  const stream_data =
    "M0 51.95 4.77 42.48 35.33 43.68 21.02 32.35 25.19 26.39 53.52 26.39 43.68 20.27 49.19 19.08 44.87 15.5 57.24 14.31 50.53 7.75 61.27 7.75 47.11 2.24 47.55 0 63.06 4.77 74.09 7.45 82.88 11.48 88.99 14.61 82.73 18.48 77.22 14.31 66.48 20.87 82.14 21.47 72.15 30.71 61.12 36.22 74.83 38.01 86.31 35.33 94.81 36.97 97.19 43.68 104.65 47.85 105.39 51.13";
  const stream_path = new Path2D(stream_data);

  const tree02_1_data =
    "M0 10.14 105.64 104.05 105.64 126.86 122.33 131.33 131.73 144.3 134.11 147.13 167.5 146.09 177.19 130.73 192.1 121.94 217.14 120.15 320 0 320 196.99 0 196.99";
  const tree02_1_path = new Path2D(tree02_1_data);

  const tree02_2_data =
    "M0 24.45 20.97 25.94 24.55 4.32 27.83 12.37 29.02 0 30.66 29.96 34.38 11.63 35.88 18.78 38.26 29.96 40.5 19.53 43.63 39.2 45.12 24 50.93 50.83 54.06 31.45 60.77 60.52 64.5 40.99 68.97 67.03 75.38 42.04 83.58 68.57 82.68 54.71 87.6 68.57 91.18 57.24 94.76 73.79 99.08 65.59 105.19 73.79 106.09 88.25 108.62 77.07 112.94 94.51 118.01 81.99 121.74 97.19 132.77 114.33 0 79.6";
  const tree02_2_path = new Path2D(tree02_2_data);

  const tree02_3_data =
    "M9.84,85.27,11,62.76l4.32,12.37L17,66.93l8.2,4.77,3.13-8.94,2.84,8.05L35,58.88l1.79,8.8,1-18.49,3.28,20,1.94-5.37L47.4,75.73,51,53.52l2.83,11,.45-9.3,4.92,12,3.43-38.76,3.28,31,4.77-12.67,3.87,5.07,1.2-18.19L80.2,47.25,82.58,37l5.52,5.51V27.58L97,39.8,95.85,31l6.71,5.06.89-19.82,7.46,15.05.59-10.88L116,25.49l3.13-15.65,7.15,11.48v-7A42.8,42.8,0,0,1,129.09,18c.6,1,0-18,0-18l8.8,17.89L141,7.45l2.83,7.75,3.88-13.71,2.38,13.12v47.7L0,104.2";
  const tree02_3_path = new Path2D(tree02_3_data);

  var bgGrd = ctx.createLinearGradient(0, 0, 0, 150);
  bgGrd.addColorStop(0, "#004264");
  bgGrd.addColorStop(0.2, "#39a2bc");
  bgGrd.addColorStop(0.4, "#b1eddf");
  bgGrd.addColorStop(0.5, "#baced3");
  bgGrd.addColorStop(0.6, "#f5baa6");
  bgGrd.addColorStop(0.7, "#fffaaa");
  bgGrd.addColorStop(0.8, "#ffff8b");
  bgGrd.addColorStop(1, "#ffbd7c");

  var streamGrd = ctx.createLinearGradient(0, 50, 0, 10);
  streamGrd.addColorStop(1, "#ffe998");
  streamGrd.addColorStop(0.5, "#29d8de");
  streamGrd.addColorStop(0, "#00386b");

  var treeGrd = ctx.createLinearGradient(0, 30, 0, 100);
  treeGrd.addColorStop(1, "#003b69");
  treeGrd.addColorStop(0, "#076aa1");

  function update() {
    ctx.clearRect(0, 0, 320, 200);

    ctx.fillStyle = bgGrd;
    ctx.fillRect(0, 0, 320, 200);

    var level = Math.round(engine.audio.level);

    if (alpha > 0) {
      alpha -= 10;
    }

    if (level > -(5 * (sense / 5))) {
      alpha += 50;
    }

    if (alpha > 255) {
      alpha = 0;
    }

    ctx.fillStyle = color + Math.round(alpha).toString(16);
    ctx.beginPath();
    ctx.arc(160, 250, 200, 0, 2 * Math.PI);
    ctx.fill();

    ctx.translate(0, 10);
    ctx.fillStyle = "#003b69";
    ctx.fill(tree02_1_path);
    ctx.resetTransform();

    ctx.fillStyle = streamGrd;
    ctx.scale(1.3, 1.3);
    ctx.translate(60, 105);
    ctx.fill(stream_path);
    ctx.resetTransform();

    ctx.fillStyle = treeGrd;
    ctx.translate(0, 10);
    ctx.scale(1, 1.3);
    ctx.fill(tree02_2_path);
    ctx.resetTransform();
    ctx.translate(170, 30);
    ctx.scale(1, 1.3);
    ctx.fill(tree02_3_path);
    ctx.resetTransform();

    ctx.fillStyle = "#001130";
    ctx.fill(tree01_1_path);
    ctx.fill(tree01_2_path);
    ctx.fill(tree01_3_path);
    ctx.fill(tree01_4_path);

    window.requestAnimationFrame(update);
  }

  //engine.zone

  window.requestAnimationFrame(update);
</script>
