<head>
    <title>Generic</title>
    <meta description="Snake-like climbing gradient effect"/>
    <meta publisher="WhirlwindFX"/>
</head>
    
<body style="margin: 0; padding: 0;">
  	<canvas id="exCanvas" width="320" height="200"></canvas>
</body>
    
<script>
    // Get the canvas element from the DOM
    var c = document.getElementById("exCanvas");
    var ctx = c.getContext("2d");  
    var width = 320;
    var height = 200;
    var hue = 0;
    let effects = [];

    function update() {
      ctx.fillStyle = "black";
      ctx.fillRect(0, 0, 320, 200);

      if (effects.length < 1){
        effects.push(new neonWall());
      }

      effects.forEach((ele, i) => {
        ele.draw();
        if (ele.lifetime == 0){
          effects.splice(i, 1);
        }
      })

      window.requestAnimationFrame(update);
    }

    function neonWall(){
      this.start = Date.now();
      this.elapsed = 0;
      this.lifetime = 100;
      this.i = 0;
      this.goal = 0;

      this.draw = function(){
        this.elapsed = Date.now() - this.start;
        if (this.elapsed > 0 && this.goal < 100){
          if(this.elapsed % 3 == 0){
            this.goal += 20;
          }
        } else if (this.elapsed > 2000 && this.i < 120){
          this.i += 20;
        } else if (this.elapsed > 3000){
          this.lifetime = 0;
        }

        let loopI = this.i;

        while (loopI <= this.goal){
          ctx.beginPath();
          let squareX = loopI;
          let squareY = 225 - .7 * loopI;
          var grd = ctx.createLinearGradient(0, 0, 0, squareY);
          grd.addColorStop(1, `hsl(${60}, 100%, 50%)`);
          grd.addColorStop(.75 + Math.sin(this.elapsed/100)/10, `hsl(${95}, 35%, 72%)`);
          grd.addColorStop(0, `hsl(${218}, 100%, 50%)`);
          ctx.fillStyle = grd;
          ctx.fillRect(squareX, squareY, 20, -1 * (225 - 1.6 * loopI) - 15 * Math.random() * Math.sin(this.elapsed/150))
          ctx.fillRect(width - squareX, squareY, -20, -1 * (225 - 1.6 * loopI) - 15 * Math.random() * Math.sin(this.elapsed/150))
          loopI += 20;
        }
      }
    }

    window.requestAnimationFrame(update);

</script>